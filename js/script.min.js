"use strict";var serv=angular.module("myApp.services",[]);serv.factory("shared",function(){var b=1;var a=new Array();a[0]=0;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=0;return{setCurrentPage:function(c){b=c},getCurrentPage:function(){return b},setChoice:function(c,d){a[c]=d},getResult:function(){return a[0]+a[1]+a[2]+a[3]+a[4]+a[5]}}});angular.module("myApp",["ngRoute","myApp.filters","myApp.services","myApp.directives","myApp.controllers","myTranslate","ui.bootstrap"]).config(["$routeProvider","$translateProvider",function(a,b){a.when("/home",{templateUrl:"partials/home.html",controller:"HomeCtrl"}).when("/book-one/page-:pageId",{templateUrl:"partials/book.html",controller:"BookCtrl"}).when("/magic-trick/page-:pageId",{templateUrl:"partials/trick.html",controller:"TrickCtrl"}).when("/resume",{templateUrl:"partials/resume.html",controller:"ResumeCtrl"}).otherwise({redirectTo:"/home"});b.preferredLanguage("en");b.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]);var filt=angular.module("myApp.filters",[]);filt.filter("startFrom",function(){return function(a,b){b=+b;return a.slice(b)}});filt.filter("truncate",function(){return function(c,b,a){if(isNaN(b)){b=10}if(a===undefined){a="..."}if(c.length<=b||c.length-a.length<=b){return c}else{return String(c).substring(0,b-a.length)+a}}});filt.filter("newline",function(){return function(a){return a.replace(/\n/g,"<br/>")}});var dir=angular.module("myApp.directives",[]);dir.directive("ngHeader",[function(){return{restrict:"A",transclude:true,templateUrl:"partials/header.html",controller:"HeaderCtrl"}}]);dir.directive("ngFooter",[function(){return{restrict:"A",transclude:true,templateUrl:"partials/footer.html"}}]);var ctrl=angular.module("myApp.controllers",[]);ctrl.controller("HeaderCtrl",["$scope","$translate","$location",function(a,b,c){a.isHome=false;a.isInEnglish=true;a.changeLang=function(d){a.isInEnglish=d;if(d){b.use("en")}else{b.use("fr")}};a.$on("$routeChangeSuccess",function(d,f,e){if(c.path()==="/home"){a.isHome=true}else{a.isHome=false}})}]);ctrl.controller("HomeCtrl",["$scope","$http","shared","$translate",function(a,d,c,b){}]);ctrl.controller("BookCtrl",["$scope","$http","shared","$location","$routeParams","$anchorScroll",function(b,f,a,e,c,d){b.current=parseInt(c.pageId);if(b.current===undefined){b.current=1}f.get("data/book-one.json").success(function(j){b.total=j.pages.length;b.items=new Array();angular.forEach(j.pages,function(l,k){if((k+1)==b.current){b.family=l.family;b.cells=l.cells;b.previous=b.current-1;b.next=(b.total<(b.current+1))?0:(b.current+1)}});b.shwPgntn=(b.total===1)?false:true;if(b.total!==1){var i=(b.total<5)?b.total:5;var h=0;var g=0;if(b.total>3){if(b.current>=3){if(b.current<(b.total-2)){h=b.current-2}else{h=b.total-4}}}angular.forEach(j.pages,function(l,k){if((g<i)&&((k+1)>=h)){var m=new Object();m.id=k+1;m.isActive=((k+1)===b.current)?true:false;b.items.push(m);g++}})}});b.backToTop=function(){e.hash("top");d()};b.goToPage=function(g){if(g!==0){e.path("book-one/page-"+g)}}}]);ctrl.controller("TrickCtrl",["$scope","$http","shared","$location","$routeParams",function(b,f,a,e,d){var c=new Array(new Array(1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63),new Array(2,3,6,7,10,11,14,15,18,19,22,23,26,27,30,31,34,35,38,39,42,43,46,47,50,51,54,55,58,59,62,63),new Array(4,5,6,7,12,13,14,15,20,21,22,23,28,29,30,31,36,37,38,39,44,45,46,47,52,53,54,55,60,61,62,63),new Array(8,9,10,11,12,13,14,15,24,25,26,27,28,29,30,31,40,41,42,43,44,45,46,47,56,57,58,59,60,61,62,63),new Array(16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63),new Array(32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63));b.current=parseInt(d.pageId);b.tab=new Array();b.result=42;if(isNaN(b.current)||b.current>7){e.path("/magic-trick/page-1")}else{if(b.current<7){b.tab=c[b.current-1]}else{if(b.current===7){b.result=a.getResult()}}}b.answerYes=function(){a.setChoice((b.current-1),c[(b.current-1)][0]);e.path("/magic-trick/page-"+(b.current+1))};b.answerNo=function(){a.setChoice((b.current-1),0);e.path("/magic-trick/page-"+(b.current+1))}}]);ctrl.controller("ResumeCtrl",["$scope","$http","shared","$translate",function(a,d,c,b){}]);